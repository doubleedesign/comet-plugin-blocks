{"version":3,"file":"ContainerSize.dist.js","sources":["ContainerSize.jsx"],"sourcesContent":["import { useMemo, useEffect, useState } from '@wordpress/element';\r\nimport { PanelBody, SelectControl } from '@wordpress/components';\r\n\r\nexport const ContainerSize = ({ attributes, setAttributes }) => {\r\n\tif (!attributes?.containerSize && !attributes?.backgroundSize) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst options = [\r\n\t\t{ label: 'Narrow', value: 'narrow' },\r\n\t\t{ label: 'Contained', value: 'contained' },\r\n\t\t{ label: 'Wide', value: 'wide' },\r\n\t\t{ label: 'Full-width', value: 'fullwidth' },\r\n\t];\r\n\r\n\t// Account for blocks that support containerSize but not backgroundSize\r\n\tif (!attributes?.backgroundSize) {\r\n\t\treturn (\r\n\t\t\t<SelectControl\r\n\t\t\t\tlabel=\"Container size\"\r\n\t\t\t\tsize={'__unstable-large'}\r\n\t\t\t\tvalue={attributes.containerSize ?? 'contained'}\r\n\t\t\t\toptions={options}\r\n\t\t\t\tonChange={(newSize) => setAttributes({ containerSize: newSize })}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\tconst [containerSizeIndex, setContainerSizeIndex] = useState(1);\r\n\tconst [backgroundSizeIndex, setBackgroundSizeIndex] = useState(3);\r\n\r\n\tconst updateContainerSize = (newSize) => {\r\n\t\tsetAttributes({ containerSize: newSize });\r\n\t\tsetContainerSizeIndex(options.findIndex(option => option.value === newSize));\r\n\t};\r\n\r\n\tconst updateBackgroundSize = (newSize) => {\r\n\t\tsetAttributes({ backgroundSize: newSize });\r\n\t\tsetBackgroundSizeIndex(options.findIndex(option => option.value === newSize));\r\n\t};\r\n\r\n\t// Filter background size options to only those larger than or equal to the selected container size\r\n\tconst filteredBackgroundOptions = useMemo(() => {\r\n\t\treturn options.slice(containerSizeIndex);\r\n\t}, [attributes.containerSize]);\r\n\r\n\t// React to the other selection changing to ensure valid state\r\n\tuseEffect(() => {\r\n\t\t// If the current background size is smaller than the container size, make it the same as the container\r\n\t\tif (backgroundSizeIndex < containerSizeIndex) {\r\n\t\t\tsetAttributes({ backgroundSize: attributes.containerSize });\r\n\t\t}\r\n\r\n\t\t// If the container size is larger than the background size, set it to the background size\r\n\t\tif (containerSizeIndex > backgroundSizeIndex) {\r\n\t\t\tsetAttributes({ containerSize: attributes.backgroundSize });\r\n\t\t}\r\n\t}, [containerSizeIndex, backgroundSizeIndex]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<SelectControl\r\n\t\t\t\tlabel=\"Container size\"\r\n\t\t\t\tsize={'__unstable-large'}\r\n\t\t\t\tvalue={attributes?.containerSize ?? 'contained'}\r\n\t\t\t\toptions={options}\r\n\t\t\t\tonChange={updateContainerSize}\r\n\t\t\t/>\r\n\t\t\t<SelectControl\r\n\t\t\t\tlabel=\"Background size\"\r\n\t\t\t\tsize={'__unstable-large'}\r\n\t\t\t\tvalue={attributes?.backgroundSize ?? 'fullwidth'}\r\n\t\t\t\toptions={filteredBackgroundOptions}\r\n\t\t\t\tonChange={updateBackgroundSize}\r\n\t\t\t/>\r\n\t\t</>\r\n\t);\r\n};\r\n"],"names":["useMemo","useEffect","useState","wp","element","PanelBody","SelectControl","components","ContainerSize","attributes","setAttributes","containerSize","backgroundSize","options","label","value","React","createElement","size","onChange","newSize","containerSizeIndex","setContainerSizeIndex","backgroundSizeIndex","setBackgroundSizeIndex","updateContainerSize","findIndex","option","updateBackgroundSize","filteredBackgroundOptions","slice","Fragment"],"mappings":"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"}