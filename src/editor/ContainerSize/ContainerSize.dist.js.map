{"version":3,"file":"ContainerSize.dist.js","sources":["ContainerSize.jsx"],"sourcesContent":["import { useMemo, useEffect, useState } from '@wordpress/element';\r\nimport { PanelBody, SelectControl } from '@wordpress/components';\r\nimport { FieldTooltip } from '../FieldTooltip/FieldTooltip.jsx';\r\n\r\n// TODO: Handle supporting innerSize where appropriate (it's not really built into the Core components unless we nest a container)\r\nexport const ContainerSize = ({ attributes, setAttributes }) => {\r\n\tconsole.log(attributes);\r\n\tif (!attributes?.size && !attributes?.innerSize) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif (!attributes?.innerSize) {\r\n\t\treturn <ContainerOnly attributes={attributes} setAttributes={setAttributes}/>;\r\n\t}\r\n\r\n\treturn <ContainerAndInner attributes={attributes} setAttributes={setAttributes}/>;\r\n};\r\n\r\nconst ContainerOnly = ({ attributes, setAttributes }) => {\r\n\r\n\tconst options = [\r\n\t\t{ label: 'Full-width', value: 'fullwidth' },\r\n\t\t{ label: 'Wide', value: 'wide' },\r\n\t\t{ label: 'Contained', value: 'contained' },\r\n\t\t{ label: 'Narrow', value: 'narrow' },\r\n\t];\r\n\r\n\treturn (\r\n\t\t<SelectControl\r\n\t\t\tlabel={\r\n\t\t\t\t<>\r\n\t\t\t\t\tContainer size\r\n\t\t\t\t\t<FieldTooltip\r\n\t\t\t\t\t\ttooltip={'Represents the maximum width of the content area inside the block; may appear to have no effect on smaller viewports'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t\tsize={'__unstable-large'}\r\n\t\t\tvalue={attributes.size}\r\n\t\t\toptions={options}\r\n\t\t\tonChange={(newSize) => setAttributes({ size: newSize })}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nconst ContainerAndInner = ({ attributes, setAttributes }) => {\r\n\r\n\tconst options = [\r\n\t\t{ label: 'Full-width', value: 'fullwidth' },\r\n\t\t{ label: 'Wide', value: 'wide' },\r\n\t\t{ label: 'Contained', value: 'contained' },\r\n\t\t{ label: 'Narrow', value: 'narrow' },\r\n\t];\r\n\r\n\tconst innerOptions = [\r\n\t\t{ label: 'Auto (do not override)', value: 'fullwidth' }, // needs to have the same values or we have a bad time with the compatibility logic\r\n\t\t{ label: 'Wide', value: 'wide' },\r\n\t\t{ label: 'Contained', value: 'contained' },\r\n\t\t{ label: 'Narrow', value: 'narrow' },\r\n\t];\r\n\r\n\r\n\tconst updateContainerSize = (newSize) => {\r\n\t\tsetAttributes({ size: newSize });\r\n\r\n\t\t// If the inner size was larger than the new container size, update it to be the same\r\n\t\tconst innerSizeIndex = options.findIndex(option => option.value === attributes.innerSize);\r\n\t\tif (innerSizeIndex > options.findIndex(option => option.value === newSize)) {\r\n\t\t\tsetAttributes({ innerSize: newSize });\r\n\t\t}\r\n\t};\r\n\r\n\tconst updateinnerSize = (newSize) => {\r\n\t\tsetAttributes({ innerSize: newSize });\r\n\r\n\t\t// If the inner size is being set larger than the current container size, update the container to match\r\n\t\tconst containerSizeIndex = options.findIndex(option => option.value === attributes.size);\r\n\t\tif (options.findIndex(option => option.value === newSize) < containerSizeIndex) {\r\n\t\t\tsetAttributes({ size: newSize });\r\n\t\t}\r\n\t};\r\n\r\n\t// Filter inner options to only those smaller than or equal to the container size\r\n\tconst filteredInnerOptions = useMemo(() => {\r\n\t\tconst containerSizeIndex = options.findIndex(option => option.value === attributes.size);\r\n\r\n\t\treturn innerOptions.slice(containerSizeIndex);\r\n\t}, [attributes.size]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<SelectControl\r\n\t\t\t\tlabel={\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\tContainer size\r\n\t\t\t\t\t\t<FieldTooltip\r\n\t\t\t\t\t\t\ttooltip={'Represents the maximum width of the content area inside the block; may appear to have no effect on smaller viewports'}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</>\r\n\t\t\t\t}\r\n\t\t\t\tsize={'__unstable-large'}\r\n\t\t\t\tvalue={attributes.size}\r\n\t\t\t\toptions={options}\r\n\t\t\t\tonChange={updateContainerSize}\r\n\t\t\t/>\r\n\t\t\t<SelectControl\r\n\t\t\t\tlabel={\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\tInner content size\r\n\t\t\t\t\t\t<FieldTooltip\r\n\t\t\t\t\t\t\ttooltip={'Optionally override the inner content\\'s overall max width; may appear to have no effect on smaller viewports'}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</>\r\n\t\t\t\t}\r\n\t\t\t\tsize={'__unstable-large'}\r\n\t\t\t\tvalue={attributes.innerSize}\r\n\t\t\t\toptions={filteredInnerOptions}\r\n\t\t\t\tonChange={updateinnerSize}\r\n\t\t\t/>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\n"],"names":["useMemo","useEffect","useState","wp","element","PanelBody","SelectControl","components","ContainerSize","attributes","setAttributes","console","log","size","innerSize","React","createElement","ContainerOnly","ContainerAndInner","options","label","value","Fragment","FieldTooltip","tooltip","onChange","newSize","innerOptions","updateContainerSize","innerSizeIndex","findIndex","option","updateinnerSize","containerSizeIndex","filteredInnerOptions","slice"],"mappings":"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"}