{"version":3,"file":"ContainerSize.dist.js","sources":["ContainerSize.jsx"],"sourcesContent":["import { useMemo, useEffect, useState } from '@wordpress/element';\r\nimport { PanelBody, SelectControl } from '@wordpress/components';\r\n\r\n// TODO: Handle supporting backgroundSize where appropriate (it's not really built into the Core components unless we nest a container)\r\nexport const ContainerSize = ({ attributes, setAttributes }) => {\r\n\tif (!attributes?.size && !attributes?.backgroundSize) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst options = [\r\n\t\t{ label: 'Narrow', value: 'narrow' },\r\n\t\t{ label: 'Contained', value: 'contained' },\r\n\t\t{ label: 'Wide', value: 'wide' },\r\n\t\t{ label: 'Full-width', value: 'fullwidth' },\r\n\t];\r\n\r\n\t// Account for blocks that support container size but not backgroundSize\r\n\tif (!attributes?.backgroundSize) {\r\n\t\treturn (\r\n\t\t\t<SelectControl\r\n\t\t\t\tlabel=\"Container size\"\r\n\t\t\t\tsize={'__unstable-large'}\r\n\t\t\t\tvalue={attributes.size ?? 'contained'}\r\n\t\t\t\toptions={options}\r\n\t\t\t\tonChange={(newSize) => setAttributes({ size: newSize })}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\tconst [containerSizeIndex, setContainerSizeIndex] = useState(1);\r\n\tconst [backgroundSizeIndex, setBackgroundSizeIndex] = useState(3);\r\n\r\n\tconst updateContainerSize = (newSize) => {\r\n\t\tsetAttributes({ size: newSize });\r\n\t\tsetContainerSizeIndex(options.findIndex(option => option.value === newSize));\r\n\t};\r\n\r\n\tconst updateBackgroundSize = (newSize) => {\r\n\t\tsetAttributes({ backgroundSize: newSize });\r\n\t\tsetBackgroundSizeIndex(options.findIndex(option => option.value === newSize));\r\n\t};\r\n\r\n\t// Filter background size options to only those larger than or equal to the selected container size\r\n\tconst filteredBackgroundOptions = useMemo(() => {\r\n\t\treturn options.slice(containerSizeIndex);\r\n\t}, [attributes.size]);\r\n\r\n\t// React to the other selection changing to ensure valid state\r\n\tuseEffect(() => {\r\n\t\t// If the current background size is smaller than the container size, make it the same as the container\r\n\t\tif (backgroundSizeIndex < containerSizeIndex) {\r\n\t\t\tsetAttributes({ backgroundSize: attributes.size });\r\n\t\t}\r\n\r\n\t\t// If the container size is larger than the background size, set it to the background size\r\n\t\tif (containerSizeIndex > backgroundSizeIndex) {\r\n\t\t\tsetAttributes({ size: attributes.backgroundSize });\r\n\t\t}\r\n\t}, [containerSizeIndex, backgroundSizeIndex]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<SelectControl\r\n\t\t\t\tlabel=\"Container size\"\r\n\t\t\t\tsize={'__unstable-large'}\r\n\t\t\t\tvalue={attributes?.size ?? 'contained'}\r\n\t\t\t\toptions={options}\r\n\t\t\t\tonChange={updateContainerSize}\r\n\t\t\t/>\r\n\t\t\t<SelectControl\r\n\t\t\t\tlabel=\"Background size\"\r\n\t\t\t\tsize={'__unstable-large'}\r\n\t\t\t\tvalue={attributes?.backgroundSize ?? 'fullwidth'}\r\n\t\t\t\toptions={filteredBackgroundOptions}\r\n\t\t\t\tonChange={updateBackgroundSize}\r\n\t\t\t/>\r\n\t\t</>\r\n\t);\r\n};\r\n"],"names":["useMemo","useEffect","useState","wp","element","PanelBody","SelectControl","components","ContainerSize","attributes","setAttributes","size","backgroundSize","options","label","value","React","createElement","onChange","newSize","containerSizeIndex","setContainerSizeIndex","backgroundSizeIndex","setBackgroundSizeIndex","updateContainerSize","findIndex","option","updateBackgroundSize","filteredBackgroundOptions","slice","Fragment"],"mappings":"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"}